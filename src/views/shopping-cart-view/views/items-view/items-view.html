<template>
	<require from="app.css"></require>
	<require from="./items-view.css"></require>
	<require from="valueConverters/currency-value-converter"></require>
	<require from="components/shop-icon-button/shop-icon-button"></require>
	<require from="components/shop-select-menu/shop-select-menu"></require>
	<require from="components/shop-select-menu-option/shop-select-menu-option"></require>

	<div class="items-view au-animate animate--fade-in animate--fade-out">
		<mdc-layout-grid no-padding>
			<mdc-layout-grid-inner>
				<mdc-layout-grid-cell span="12">
					<h5 class="text-on-surface">
						Deine Artikel
					</h5>
					<h6 class="mb-3 sub-title">
						Diese Artikel wirst du kaufen.
					</h6>
				</mdc-layout-grid-cell>
			</mdc-layout-grid-inner>
			<mdc-layout-grid-inner>
				<mdc-layout-grid-cell span="12">
					<div repeat.for="item of getCardItems() & async & signal:'cart-updated'"
						 class="card frost mb-3 rounded-1 border-0 overflow-visible"
					>

						<mdc-card
							surface
							disable-ripple
							class="overflow-visible"
						>
							<mdc-form-field>
								<a href="#/product-detail?id=${item.product.id}" class="shop-ripple">
									<img class="img-size ratio-16x9" src="${item.product.image}" alt="produkt-thumbnail">
								</a>
								<div class="item-card-height ps-2 d-flex flex-column justify-content-between">
									<mdc-layout-grid-cell class="w-auto p-0">
										<h4 class="text-on-surface card-title">
											${item.product.title}
										</h4>
									</mdc-layout-grid-cell>
									<mdc-layout-grid-cell span="12">
										<mdc-layout-grid-inner
											class="d-flex justify-content-between align-items-center pt-2 pb-2 pe-2"
										>
											<mdc-layout-grid-cell span="8" class="d-flex justify-content-start">
													<div mdc-menu-surface-anchor>
														<mdc-text-field label="Anzahl" ref="basicInput"></mdc-text-field>
														<mdc-text-field-helper-line></mdc-text-field-helper-line>
														<mdc-lookup options.bind="basicOptions" input.bind="basicInput" preload-options value.bind="basicValue" autoselect-single-on-blur>
														</mdc-lookup>
													</div>
													<shop-icon-button icon="delete_forever"
																	  outlined.bind=true
																	  class="position-relative text-danger ms-2"
																	  click.trigger="setCartItems(item.product.id, 0)"
													>
													</shop-icon-button>
											</mdc-layout-grid-cell>
											<mdc-layout-grid-cell
												span="12"
											>
												<span class="fs-4 fw-bold text-on-surface">${item.product.price | currency
												:
												'EUR'}</span>
											</mdc-layout-grid-cell>
										</mdc-layout-grid-inner>
									</mdc-layout-grid-cell>
								</div>
							</mdc-form-field>
						</mdc-card>
					</div>
				</mdc-layout-grid-cell>
				<mdc-layout-grid-cell span="12">
					<div class="d-flex justify-content-end">
						<a type="submit"
						   mdc-button
						   unelevated
						   route-href="route: address"
						   class="mdc-button--secondary"
						>

							<span mdc-button-label>Weiter</span>
							<mdc-icon>local_shipping</mdc-icon>
						</a>
					</div>
				</mdc-layout-grid-cell>
			</mdc-layout-grid-inner>
		</mdc-layout-grid>
	</div>
</template>

